<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <link rel="stylesheet" href="/styles/navbar.css">
    <link rel="stylesheet" href="/styles/profile-styles.css">
</head>
<body class="profile-page">
    <header class="header-hero-container">
        <%- include('partials/navbar', { user: user }) %>
    </header>
    <div class="profile-page-container">
        <div class="profile-page-card">
            <div class="profile-header">
                <h2 id="welcomeMessage"><%= user.nickname %>님, 환영합니다!</h2>
                <div class="profile-avatar">
                    <img src="<%= user.avatarUrl %>" alt="User Avatar" id="avatarImage">
                    <input type="file" id="avatarInput" style="display: none;">
                    <button class="btn change-avatar-btn" onclick="document.getElementById('avatarInput').click()">Change Avatar</button>
                </div>
            </div>
            <div class="tab-container">
                <button class="tab-btn active" onclick="openTab(event, 'basic-info')">기본 정보</button>
                <button class="tab-btn" onclick="openTab(event, 'activity')">활동 내역</button>
                <button class="tab-btn" onclick="openTab(event, 'settings')">설정</button>
            </div>
            <div id="basic-info" class="tab-content active">
                <div class="profile-page-info">
                    <input type="hidden" id="userId" value="<%= user._id %>">
                    <div class="profile-info-item">
                        <strong>Username:</strong>
                        <span><%= user.username %></span>
                    </div>
                    <div class="profile-info-item">
                        <strong>Nickname:</strong>
                        <span id="nicknameDisplay"><%= user.nickname %></span>
                    </div>
                    <div class="profile-info-item">
                        <strong>Email:</strong>
                        <span><%= user.email %></span>
                    </div>
                    <div class="profile-info-item">
                        <strong>Password:</strong>
                        <span>********</span>
                    </div>
                </div>
            </div>
            <div id="activity" class="tab-content">
                <p>활동 내역을 여기에 표시합니다.</p>
            </div>
            <div id="settings" class="tab-content">
                <div class="profile-page-info">
                    <div class="profile-info-item">
                        <strong>Change Nickname:</strong>
                        <span id="nicknameDisplay"><%= user.nickname %></span>
                        <button class="btn change-nickname-btn" onclick="showNicknameInput()">닉네임 변경</button>
                        <div class="input-group" id="nicknameInputGroup" style="display: none;">
                            <input type="text" id="nicknameInput" value="">
                            <button class="btn check-nickname-btn" onclick="checkNickname()">중복 확인</button>
                        </div>
                        <span id="nicknameMessage" style="display: none;"></span>
                    </div>
                </div>
            </div>
            <div class="profile-actions">
                <button class="btn save-btn" onclick="saveProfile()">Save Profile</button>
            </div>
        </div>
    </div>

    <script src="/scripts/profile.js"></script>
</body>
</html>
